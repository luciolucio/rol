require 'rake/clean'
require 'rake/testtask'

task :default => [ :test ]

task :config do
	if File.exists?( "config_local.y" )
		config = File.new( "config_local.y" ).read
	else
		puts( "No config_local.y found. Requesting config data." )

		print( "Enter username: " )
		user = gets

		print( "Enter password: " )
		pass = gets

		config = File.new( "config_template.y" ).read
		config = config.gsub( "<user>", user )
		config = config.gsub( "<pass>", pass )
	end

	final_config = File.new( "config.y", "w" )
	final_config.write( config )
end

task :clean do
	CLEAN.add( FileList[ "*~" ] )
end

Rake::TestTask.new( :test ) do | t |
	t.pattern = 'test/*_test.rb'
end
